<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Game</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" media="screen" href="/style/style.css" />
    <!-- <script src = "game.js"></script> -->
</head>

<body>


    <canvas id="canvas" height="500" width="900"></canvas>
    <button id="left">Left</button>
    <button id="right">Right</button>
    <button id="down">Down</button>
    <button id="up">Up</button>
    <button id="chill">Chill</button>
    <img id="moneyone" src="/imgs/munn.png" onclick="fightOne()">
    <img src="imgs/door.png" id="arrow" onclick="nextMap()">

    <script>
        var canvas = document.getElementById("canvas");
        var context = canvas.getContext('2d');
        var xPos = 0;
        var yPos = 0;
        // var trackFront = 0;
        // var trackRight = 1;
        // var trackLeft = .4;
        // var moveLeft1 = false;
        var cols = 8;

        var character = new Image();
        character.src = "/imgs/knightidle.png"


        document.getElementById("right").onclick = function moveRight() {
            character.src = "/imgs/knightmoveright.png";
            xPos += 20;
        }
        document.getElementById("left").onclick = function moveLeft() {
            character.src = "/imgs/knightmoveleft.png"
            xPos -= 20;
        }

        document.getElementById("down").onclick = function moveLeft() {
            character.src = "/imgs/knightmoveforward.png"
            yPos += 20;
        }

        document.getElementById("up").onclick = function moveLeft() {
            character.src = "/imgs/knightmoveback.png"
            yPos -= 20;
        }

        document.getElementById("chill").onclick = function dontMove() {
            character.src = "/imgs/knightidle.png"
        }
        // function Character(sWidth, sHeight,sheetHeight , sheetWidth, cols, rows,src){
        // this.sWidth = sWidth;
        // this.sHeigth = sHeight;
        // this.sheetHeight = sheetHeight;
        //  this.sheetWidth = 672;
        //  cols = 8;
        //  rows = 1;
        //  this.src = src
        // }


        var sx = 0;
        var sy = 0;
        var sWidth = 35;
        var sHeigth = 34;
        var sheetWidth = 672;
        var sheetHeight = 420;
        // var cols = 8;

        var rows = 1;


        var width = sheetWidth / cols;
        var height = sheetHeight / rows;
        var currentFrame = 0;


        //             var character = sprite({
        //     context: canvas.getContext("2d"),
        //     sWidth: 35 ,
        //     sHeight: 34,
        //     image: "knightidle.png",
        //     cols:8
        // });

        // var enemy1 = new sprite({
        //     context: canvas.getContext("2d"),
        //     sWidth: 35,
        //     sHeight: 34,
        //     image: enemy1img,
        //     cols: 7
        // })
        var enemy1 = new Image();
        enemy1.src = "/imgs/fire-skull.png";


        var background = new Image();
        background.src = "/imgs/litty.gif";
        myBackground = new Image(656, 270, "/imgs/litty.gif", 0, 0, "image");

        // var enemy1 = new Image();
        // enemy1.src="muney.png"




        // Make sure the image is loaded first otherwise nothing will draw.
        background.onload = function () {
            drawImage();



        }
        //         var img = new Image();   // Create new img element
        // img.src = "fire-skull.png";

        // enemy1.onload = function (){
        //     context.drawImage(enemy1,40,80);
        // }
        // function updateFrame2() {

        //     cols = 7;
        //     width = sheetWidth / cols;

        //     currentFrame = ++currentFrame % cols;

        //     sx = currentFrame * width;
        //     sy = 0 * height;
        //     context.drawImage(enemy1, sx, sy, width, height, 900, 200, width, height)

        // }

        function updateFrame() {
            context.clearRect(xPos, yPos, width, height);
            cols = 8;
            width = sheetWidth / cols;
            currentFrame = ++currentFrame % cols;

            sx = currentFrame * width;
            sy = 0 * height;


        }

        function updateFrame2() {

            cols = 7;
            width = sheetWidth / cols;

            currentFrame = ++currentFrame % cols;

            sx = currentFrame * width;
            sy = 0 * height;
            context.drawImage(enemy1, sx, sy, width, height, 550, 350, width, height)

        }

        function drawImage() {


            updateFrame();


            context.drawImage(background, 0, 0);
            //xpos and ypos are where the sprite is on the page
            context.drawImage(character, sx, sy, width, height, xPos, yPos, width, height)
            //second sprite frame
            updateFrame2();
        }



        setInterval(function () {
            drawImage();


        }, 90);



        function nextMap() {
            window.location.href = "/stage2";

        }

        function fightOne() {
            window.location.href = ""
        }
    </script>
</body>

</html>