<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Game</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" media="screen" href="/style/style.css" />

</head>

<body>
    <canvas id="canvas3" height="500" width="900"></canvas>
    <button id="left2">Left</button>
    <button id="right2">Right</button>
    <button id="down2">Down</button>
    <button id="up2">Up</button>
    <button id="chill2">Chill</button>
    <img id="money" src="/imgs/munn.png" onclick="fightTwo()">
    <img src="/imgs/door.png" id="arrow2" onclick="nextMap3()">
    <img src="/imgs/door2.png" id="backdoor2" onclick="backMap2()">


    <script>
        var canvas = document.getElementById("canvas3");
        var context = canvas.getContext('2d');




        var xPos = 0;
        var yPos = 0;
        // var trackFront = 0;
        // var trackRight = 1;
        // var trackLeft = .4;
        // var moveLeft1 = false;
        var cols = 8;

        var character = new Image();
        character.src = "/imgs/knightidle.png"


        document.getElementById("right2").onclick = function moveRight() {
            character.src = "/imgs/knightmoveright.png";
            xPos += 20;
        }
        document.getElementById("left2").onclick = function moveLeft() {
            character.src = "/imgs/knightmoveleft.png"
            xPos -= 20;
        }

        document.getElementById("down2").onclick = function moveLeft() {
            character.src = "/imgs/knightmoveforward.png"
            yPos += 20;
        }

        document.getElementById("up2").onclick = function moveLeft() {
            character.src = "/imgs/knightmoveback.png"
            yPos -= 20;
        }

        document.getElementById("chill2").onclick = function dontMove() {
            character.src = "/img/knightidle.png"
        }
        // function Character(sWidth, sHeight,sheetHeight , sheetWidth, cols, rows,src){
        // this.sWidth = sWidth;
        // this.sHeigth = sHeight;
        // this.sheetHeight = sheetHeight;
        //  this.sheetWidth = 672;
        //  cols = 8;
        //  rows = 1;
        //  this.src = src
        // }


        var sx = 0;
        var sy = 0;
        var sWidth = 35;
        var sHeigth = 34;
        var sheetWidth = 672;
        var sheetHeight = 420;
        // var cols = 8;

        var rows = 1;


        var width = sheetWidth / cols;
        var height = sheetHeight / rows;
        var currentFrame = 0;


        //             var character = sprite({
        //     context: canvas.getContext("2d"),
        //     sWidth: 35 ,
        //     sHeight: 34,
        //     image: "knightidle.png",
        //     cols:8
        // });

        // var enemy1 = new sprite({
        //     context: canvas.getContext("2d"),
        //     sWidth: 35,
        //     sHeight: 34,
        //     image: enemy1img,
        //     cols: 7
        // })
        var enemy1 = new Image();
        enemy1.src = "/imgs/hell-beast-idle.png";


        var background2 = new Image();
        background2.src = "/imgs/city3.gif";
        myBackground = new Image(656, 270, "/imgs/city3.gif", 0, 0, "gif");

        // var enemy1 = new Image();
        // enemy1.src="muney.png"




        // Make sure the image is loaded first otherwise nothing will draw.
        background2.onload = function () {
            drawImage1();



        }
        //         var img = new Image();   // Create new img element
        // img.src = "fire-skull.png";

        // enemy1.onload = function (){
        //     context.drawImage(enemy1,40,80);
        // }
        // function updateFrame2() {

        //     cols = 12;
        //     width = sheetWidth / cols;

        //     currentFrame = ++currentFrame % cols;

        //     sx = currentFrame * width;
        //     sy = 0 * height;
        //     context.drawImage(enemy1, sx, sy, width, height, 900, 200, width, height)

        // }

        function updateFrame() {
            context.clearRect(xPos, yPos, width, height);
            cols = 8;
            width = sheetWidth / cols;
            currentFrame = ++currentFrame % cols;

            sx = currentFrame * width;
            sy = 0 * height;


        }

        function updateFrame2() {

            cols = 12;
            width = sheetWidth / cols;

            currentFrame = ++currentFrame % cols;

            sx = currentFrame * width;
            sy = 0 * height;
            context.drawImage(enemy1, sx, sy, width, height, 580, 420, width, height)

        }

        function drawImage1() {


            updateFrame();


            context.drawImage(background2, 0, 0);
            //xpos and ypos are where the sprite is on the page
            context.drawImage(character, sx, sy, width, height, xPos, yPos, width, height)
            // context.drawImage(enemy1, sx, sy, width, height, 400, 200, width, height)
            updateFrame2();
        }



        setInterval(function () {
            drawImage1();


        }, 90);

        function nextMap3() {
            window.location.href = "/stage4";

        }

        function backMap2() {
            window.location.href = "/stage2";
        }

        function fightTwo() {
            window.location.href = "/fight2";
        }
    </script>
</body>

</html>